{% extends 'adminapp/index.html' %}
{% block content %}
<div class="container mt-5" style="position: relative; z-index: 1;">
  <h1 class="mb-4">Companies</h1>
  <p>
    <a href="{% url 'company-add' %}" class="btn btn-primary"> Add New Company</a>
  </p>

  {% if companies %}
    <ul class="list-group">
      {% for c in companies %}
        <li class="list-group-item mb-3">
          <h5 class="mb-2">{{ c.name }}</h5>
          {% if c.logo %}
            <img src="{{ c.logo.url }}" alt="{{ c.name }} logo" class="img-thumbnail mb-2" style="max-height:80px;">
          {% endif %}
          <p>{{ c.description }}</p>
          <div class="d-flex gap-2">
            <a href="{% url 'company-edit' c.pk %}" class="btn btn-sm btn-warning"> Edit</a>
            <form action="{% url 'company-delete' c.pk %}" method="POST" style="display:inline;">
              {% csrf_token %}
              <button type="submit" class="btn btn-sm btn-danger"
                      onclick="return confirm('Are you sure you want to delete this company?');">
                 Delete
              </button>
            </form>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No companies yet.</p>
  {% endif %}
</div>
{% endblock %}
